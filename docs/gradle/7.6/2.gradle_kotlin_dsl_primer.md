---
layout: default
title: 그레이들 코틀린 DSL 입문서(Gradle Kotlin DSL Primer)
parent: 7.6
grand_parent: Gradle
nav_order: 3
---

***
<B>목차</B>
- 전제조건(Prerequisites)
- IDE 지원(IDE support)
- 코틀린 DSL 스크립트(Kotlin DSL scripts)
- Type-safe model accessors
- Multi-project builds
- When you can’t use the plugins {} block
- Working with container objects
- Working with runtime properties
- The Kotlin DSL Plugin
- The embedded Kotlin
- Interoperability
- Limitations
***


# 그레이들 코틀린 DSL 입문서(Gradle Kotlin DSL Primer)
그레이들의 코틀린 DSL은 우수한 콘텐츠 지원, 리팩토링, 문서화 등 지원되는 IDE의 향상된 편집 환경을 통해 기존 그루비 DSL에 대한 대체 문법을 제공한다. 이 장에서는 주요 코틀린 DSL 구성에 대한 세부정보와 이를 사용하여 그레이들 API와 상호작용하는 방법을 제공한다.

{: .note}
기존 그레이들 빌드를 코틀린 DSL로 마이그레이션하는 데 관심이 있다면 전용 마이그레이션 장도 확인해보자.


## 전제조건(Prerequisites)
- 내장된 코틀린 컴파일러는 x86-64 아키텍처의 리눅스, 맥OS, 윈도우, Cygwin, FreeBSD 및 솔라리스에서 작동하는 것으로 알려져 있다.
- 코틀린 문법과 기본 언어 기능에 대한 지식은 매우 도움이 된다. 코틀린 레퍼런스 문서와 코틀린 Koans는 기초를 배우는 데 도움이 된다.
- plugins {} 블록을 사용하여 그레이들 플러그인을 선언하면 편집 환경이 크게 향상되므로 적극 권장한다.


## IDE 지원(IDE support)
테이블 1. IDE 지원 사항

||Build import|문법 강조(Syntax highlighting) `1`|Semantic editor `2`|
|---|---|---|---|
|IntelliJ IDEA|✓|✓|✓|
|Android Studio|✓|✓|✓|
|Eclipse IDE|✓|✓|✖|
|CLion|✓|✓|✖|
|Apache NetBeans|✓|✓|✖|
|Visual Studio Code (LSP)|✓|✓|✖|
|Visual Studio|✓|✖|✖|

`1` 그레이들 코틀린 DSL 스크립트에서 코틀린 문법 강조 표시
`2` 그레이들 코틀린 DSL 스크립트의 코드 완성, 소스 탐색, 문서, 리팩토링 등...​

제한 사항에서 언급했듯이, 인텔리J IDEA에서 코틀린 DSL 스크립트용 콘텐츠 지원 및 리팩토링 툴을 얻으려면 [그레이들 모델에서 프로젝트를 가져](https://www.jetbrains.com/help/idea/gradle.html#gradle_import)와야 한다.

구성 시간이 느린 빌드는 IDE 응답성에 영향을 미칠 수 있으므로, 이러한 문제를 해결하려면 [성능 장](https://docs.gradle.org/7.6/userguide/performance.html#performance_gradle)을 확인해보자.


### 자동 빌드 가져오기 및 스크립트 의존성 자동 재로드(Automatic build import vs. automatic reloading of script dependencies)
인텔리J IDEA와 인텔리J IDEA에서 파생된 안드로이드 스튜디오 모두 빌드 로직이 변경되는 시점을 감지하고 두 가지를 제공한다.

1. 전체 빌드를 다시 가져온다.
![](https://docs.gradle.org/7.6/userguide/img/intellij-build-import-popup.png)
![](https://docs.gradle.org/7.6/userguide/img/android-studio-build-sync-popup.png)
2. 빌드 스크립트 편집 시 스크립트 의존성 재로드
![](https://docs.gradle.org/7.6/userguide/img/intellij-script-dependencies-reload.png)

자동 빌드 가져오기를 비활성화하고, 스크립트 의존성의 자동 재로드를 활성화하는 것이 좋다. 이렇게 하면 그레이들 스크립트를 편집하는 동안 초기 피드백을 받고 전체 빌드 설정이 IDE와 동기화되는 시점을 제어할 수 있다.


### 문제 해결(Troubleshooting)
IDE 지원은 두 가지 컴포넌트로 제공된다.
- 인텔리J IDEA/안드로이드 스튜디오에서 사용되는 코틀린 플러그인
- 그레이들

지원 레벨은 각 버전에 따라 다르다.

문제가 발생하면 가장 먼저 시도해야 할 일은 명령줄에서 `./gradlew tasks`를 실행하여 문제가 IDE에 국한되어 있는지 확인하는 것이다.

명령줄에서 동일한 문제가 발생하면 IDE 통합이 아니라 빌드에 문제가 있는 것이다.

위의 방법이 작동하지 않고 코틀린 DSL 스크립트 편집기에 문제가 있다고 의심되는 경우 다음을 수행할 수 있다.
- 자세한 내용을 보기위해 `./gradle tasks`를 실행해보자.
- 다음 위치 중 하나의 로그를 확인해보자.
    - 맥OS X에서 `$HOME/Library/Logs/gradle-kotlin-dsl`
    - 리눅스에서 `$HOME/.gradle-kotlin-dsl/log`
    - 윈도우에서 `$HOME/AppData/Local/gradle-kotlin-dsl/log`
- 가능한 한 많은 세부정보를 포함하여 보기 위해 그레이들 이슈 트래커에서 문제를 연다.

버전 5.1부터는 로그 디렉터리가 자동으로 정리된다. 주기적으로(최대 24시간마다) 확인하여 7일 동안 사용하지 않은 로그 파일은 삭제한다.

위의 방법으로 문제를 정확히 찾아낼 수 없다면 IDE에서 `org.gradle.kotlin.dsl.logging.tapi` 시스템 프로퍼티를 활성화할 수 있다. 그러면 그레이들 데몬(Daemon)이 `$HOME/.gradle/daemon`에 있는 로그 파일에 추가 정보를 기록한다. 인텔리J IDEA에서는 Help > Edit Custom VM Options...을 열고 `-Dorg.gradle.kotlin.dsl.logging.tapi=true`를 추가하여 이 작업을 수행할 수 있다.

코틀린 DSL 스크립트 편집기 외부의 IDE 문제인 경우 해당 IDE 이슈 트래커에서 문제를 열어보자.
- 젯브레인 IDE 이슈 트래커,
- 구글 안드로이드 스튜디오 이슈 트래커

마지막으로, 그레이들 자체 또는 코틀린 DSL에 문제가 있는 경우 그레이들 이슈 트래커에서 문제를 열어보자.
