---
layout: default
title: 5. Configuring a Step
parent: 5.0.2
grand_parent: SpringBatch
nav_order: 4
---


# 5. Configuring a Step
[도메인 장](https://onestone9900.github.io/docs/spring_batch/5.0.2/3.%20domain_language_of_batch/#3-the-domain-language-of-batch)에서 설명한 것처럼, `스텝(Step)`은 배치 잡의 독립적이고 순차적인 단계를 캡슐화하며 실제 배치 처리를 정의하고 제어하는 ​​데 필요한 모든 정보를 가지고 있는 도메인 객체이다. 주어진 스텝의 내용은 `잡`을 작성하는 개발자의 재량에 따르기 때문에 이것은 애매한 설명이 된다. `스텝`은 개발자의 노력에 따라 간단하거나 복잡할 수 있다. 간단한 `스텝`은 파일에서 데이터베이스로 데이터를 로드할 수 있으며, 코드가 거의 또는 전혀(사용된 구현에 따라 다름) 필요하지 않다. 복잡한 `스텝`은 다음 이미지와 같이, 처리의 일부로 복잡한 비즈니스 규칙이 있을 수 있다:

![스텝](https://docs.spring.io/spring-batch/docs/current/reference/html/images/step.png)

이미지 13. 스텝(Step)

5.1. Chunk-oriented Processing
일반적으로 스프링 배치는 구현체에서 "청크 지향" 스타일을 사용한다. 데이터를 한 번에 읽어 트랜잭션 경계 내에서 '청크' 단위를 생성하는 것을 청크 지향 처리라 말한다. 읽은 항목 수가 커밋 인터벌(commit interval)과 같으면, 전체 청크가 `아아템라이터(ItemWriter)`에 의해 기록된 다음 트랜잭션이 커밋된다. 다음 이미지는 해당 프로세스를 보여준다:

![청크 지향 처리(https://docs.spring.io/spring-batch/docs/current/reference/html/images/chunk-oriented-processing.png)

이미지 14. 청크 지향 처리

다음 의사 코드는 동일한 개념을 단순화된 형태로 보여준다:
```
  List items = new Arraylist();
  for(int i = 0; i < commitInterval; i++){
      Object item = itemReader.read();
      if (item != null) {
          items.add(item);
      }
  }
  itemWriter.write(items);
```

항목을 `아이템라이터(ItemWriter)`에 전달하기 전에 항목을 처리하기 위해 옵셔널로 `아이템프로세서(ItemProcessor)`를 사용하여 청크 지향 스텝를 구성할 수도 있다. 다음 이미지는 스텝에 `아이템프로세서(ItemProcessor)`를 등록한 경우의 프로세스를 보여준다:

![](https://docs.spring.io/spring-batch/docs/current/reference/html/images/chunk-oriented-processing-with-item-processor.png)

이미지 15. 아이템프로세서(ItemProcessor)와 청크 지향 처리

다음 의사 코드는 단순한 형식으로 구현되는 방법을 보여준다:

```
  List items = new Arraylist();
  for(int i = 0; i < commitInterval; i++){
      Object item = itemReader.read();
      if (item != null) {
          items.add(item);
      }
  }
  List processedItems = new Arraylist();
  for(Object item: items){
      Object processedItem = itemProcessor.process(item);
      if (processedItem != null) {
          processedItems.add(processedItem);
      }
  }
  itemWriter.write(processedItems);
```

아이템 프로세서(item processor) 및 해당 사용 사례에 대한 자세한 내용은, 아이템 처리(processing) 절을 참고하자.