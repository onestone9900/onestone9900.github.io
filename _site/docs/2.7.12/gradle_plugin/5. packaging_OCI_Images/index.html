<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico" type="image/x-icon"><title>Packaging OCI Images | 문서 한글화</title><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Packaging OCI Images" /><meta property="og:locale" content="en_US" /><meta name="description" content="한글 번역" /><meta property="og:description" content="한글 번역" /><link rel="canonical" href="http://0.0.0.0:4000/docs/2.7.12/gradle_plugin/5.%20packaging_OCI_Images/" /><meta property="og:url" content="http://0.0.0.0:4000/docs/2.7.12/gradle_plugin/5.%20packaging_OCI_Images/" /><meta property="og:site_name" content="문서 한글화" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Packaging OCI Images" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"한글 번역","headline":"Packaging OCI Images","url":"http://0.0.0.0:4000/docs/2.7.12/gradle_plugin/5.%20packaging_OCI_Images/"}</script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewBox="0 0 16 16"><title>Copy</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"><title>Copied</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg><div class="side-bar"><div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> 문서 한글화 </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">onestone</a><li class="nav-list-item active"><button class="nav-list-expander btn-reset" aria-label="toggle items in 2.7.12 category" aria-pressed="true"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/2.7.12/" class="nav-list-link">2.7.12</a><ul class="nav-list"><li class="nav-list-item "><button class="nav-list-expander btn-reset" aria-label="toggle items in SpringBoot category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/2.7.12/spring_boot/0.%20spring_boot/" class="nav-list-link">SpringBoot</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/2.7.12/spring_boot/1.%20legal/" class="nav-list-link">1. Legal</a><li class="nav-list-item "> <a href="/docs/2.7.12/spring_boot/2.%20getting-help/" class="nav-list-link">2. Getting Help</a></ul><li class="nav-list-item active"><button class="nav-list-expander btn-reset" aria-label="toggle items in GradlePlugin category" aria-pressed="true"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/2.7.12/gradle_plugin/0.%20gradle_plugin/" class="nav-list-link">GradlePlugin</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/2.7.12/gradle_plugin/1.%20introduction/" class="nav-list-link">1. Introduction</a><li class="nav-list-item "> <a href="/docs/2.7.12/gradle_plugin/2.%20getting_started/" class="nav-list-link">2. Getting Started</a><li class="nav-list-item "> <a href="/docs/2.7.12/gradle_plugin/3.%20managing_dependencies/" class="nav-list-link">3. Managing Dependencies</a><li class="nav-list-item "> <a href="/docs/2.7.12/gradle_plugin/4.%20packaging_executable_archives/" class="nav-list-link">4. Packaging Executable Archives</a><li class="nav-list-item active"> <a href="/docs/2.7.12/gradle_plugin/5.%20packaging_OCI_Images/" class="nav-list-link active">5. Packaging OCI Images</a></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in spring_batch category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/spring_batch/" class="nav-list-link">spring_batch</a><ul class="nav-list"><li class="nav-list-item "><button class="nav-list-expander btn-reset" aria-label="toggle items in 5.0.2 category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/spring_batch/5.0.2/0.%20index/" class="nav-list-link">5.0.2</a><ul class="nav-list"></ul></ul><li class="nav-list-item"><a href="/docs/grossary/" class="nav-list-link">용어사전 및 규칙</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search" role="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search 문서 한글화" aria-label="Search 문서 한글화" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="//github.com/onestone9900" class="site-button" > Onestone on GitHub </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/docs/2.7.12/">2.7.12</a><li class="breadcrumb-nav-list-item"><a href="/docs/2.7.12/gradle_plugin/0.%20gradle_plugin/">GradlePlugin</a><li class="breadcrumb-nav-list-item"><span>5. Packaging OCI Images</span></ol></nav><div id="main-content" class="main-content"><main><h1 id="chapter-5-packaging-oci-images"> <a href="#chapter-5-packaging-oci-images" class="anchor-heading" aria-labelledby="chapter-5-packaging-oci-images"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Chapter 5. Packaging OCI Images</h1><p>플러그인은 <a href="https://buildpacks.io/">Cloud Native Buildpacks</a>(CNB)를 사용하여 jar 또는 war 파일에서 <a href="https://github.com/opencontainers/image-spec">OCI 이미지</a>를 생성할 수 있다. <code class="language-plaintext highlighter-rouge">bootBuildImage</code> 태스크를 사용하여 이미지를 빌드할 수 있다.</p><blockquote class="important"><p>보안상의 이유로 이미지는 루트가 아닌 사용자로 빌드 및 실행된다. 자세한 내용은 <a href="https://buildpacks.io/docs/reference/spec/platform-api/#users">CNB 사양</a>을 참조해보자.</p></blockquote><p>태스크는 <code class="language-plaintext highlighter-rouge">java</code> 또는 <code class="language-plaintext highlighter-rouge">war</code> 플러그인이 적용될 때 자동으로 생성되며 <code class="language-plaintext highlighter-rouge">BootBuildImage</code>의 인스턴스이다.</p><h2 id="51-docker-daemon"> <a href="#51-docker-daemon" class="anchor-heading" aria-labelledby="51-docker-daemon"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.1. Docker Daemon</h2><p><code class="language-plaintext highlighter-rouge">bootBuildImage</code> 태스크에는 도커 데몬에 대한 액세스 권한이 필요하다. 기본적으로, 로컬 연결을 통해 도커 데몬과 통신한다. 이는 구성 없이 지원되는 모든 플랫폼에서 도커 엔진과 함께 작동한다.</p><p>환경 변수를 설정하여 <code class="language-plaintext highlighter-rouge">bootBuildImage</code> 태스크를 대체 로컬(alternative local) 또는 원격 연결을 사용하도록 구성할 수 있다. 다음 표는 환경 변수와 해당 값을 보여준다:</p><div class="table-wrapper"><table><thead><tr><th>Environment variable<th>Description<tbody><tr><td>DOCKER_HOST<td>도커 데몬의 호스트 및 포트를 포함하는 URL - 예를들어 <code class="language-plaintext highlighter-rouge">tcp://192.168.99.100:2376</code><tr><td>DOCKER_TLS_VERIFY<td><code class="language-plaintext highlighter-rouge">1</code>로 설정된 경우 보안 HTTPS 프로토콜 활성화(선택 사항)<tr><td>DOCKER_CERT_PATH<td>HTTPS용 인증서 및 키 파일의 경로(<code class="language-plaintext highlighter-rouge">DOCKER_TLS_VERIFY=1</code>인 경우 필수, 그렇지 않은 경우 무시됨)</table></div><p>플러그인 구성에서 <code class="language-plaintext highlighter-rouge">docker</code> 프로퍼티를 사용하여 도커 데몬 연결 정보를 제공할 수도 있다. 다음 표에는 사용 가능한 프로퍼티가 요약되어 있다:</p><div class="table-wrapper"><table><thead><tr><th>Property<th>Description<tbody><tr><td><code class="language-plaintext highlighter-rouge">host</code><td>도커 데몬의 호스트 및 포트를 포함하는 URL - 예를들어 <code class="language-plaintext highlighter-rouge">tcp://192.168.99.100:2376</code><tr><td><code class="language-plaintext highlighter-rouge">tlsVerify</code><td><code class="language-plaintext highlighter-rouge">true</code>로 설정된 경우 보안 HTTPS 프로토콜 활성화(선택 사항)<tr><td><code class="language-plaintext highlighter-rouge">certPath</code><td>HTTPS용 인증서 및 키 파일의 경로(<code class="language-plaintext highlighter-rouge">tlsVerify</code>가 <code class="language-plaintext highlighter-rouge">true</code>인 경우 필요, 그렇지 않은 경우 무시됨)<tr><td><code class="language-plaintext highlighter-rouge">bindHostToBuilder</code><td>When true, the value of the host property will be provided to the container that is created for the CNB builder (optional)</table></div><p>자세한 내용은 <a href="https://docs.spring.io/spring-boot/docs/2.7.12/gradle-plugin/reference/htmlsingle/#build-image.examples.docker">예제</a>를 참조해보자.</p><h2 id="52-docker-registry"> <a href="#52-docker-registry" class="anchor-heading" aria-labelledby="52-docker-registry"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.2. Docker Registry</h2><p><code class="language-plaintext highlighter-rouge">builder</code> 또는 <code class="language-plaintext highlighter-rouge">runImage</code> 프로퍼티에 지정된 도커 이미지가 인증이 필요한 프라이빗(private) 도커 이미지 레지스트리에 저장되는 경우, <code class="language-plaintext highlighter-rouge">docker.builderRegistry</code> 프로퍼티를 사용하여 인증 크리덴셜(credentials)를 제공할 수 있다.</p><p>프로퍼티는 사용자 인증 또는 ID 토큰 인증을 위해 제공된다. 지원되는 인증 메소드에 대한 자세한 내용은 이미지를 저장하는 데 사용되는 도커 레지스트리에 대한 설명서를 참조하자.</p><p>다음 표는 <code class="language-plaintext highlighter-rouge">docker.builderRegistry</code> 및 <code class="language-plaintext highlighter-rouge">docker.publishRegistry</code>에 사용 가능한 프로퍼티가 요약되어 있다.</p><div class="table-wrapper"><table><thead><tr><th>Property<th>Description<tbody><tr><td><code class="language-plaintext highlighter-rouge">username</code><td>도커 이미지 레지스트리 사용자의 이름. 사용자 인증에 필수.<tr><td><code class="language-plaintext highlighter-rouge">password</code><td>도커 이미지 레지스트리 사용자의 비밀번호. 사용자 인증에 필수.<tr><td><code class="language-plaintext highlighter-rouge">url</code><td>도커 이미지 레지스트리의 주소. 사용자 인증을 위한 선택 사항.<tr><td><code class="language-plaintext highlighter-rouge">email</code><td>도커 이미지 레지스트리 사용자의 이메일 주소. 사용자 인증을 위한 선택 사항.<tr><td><code class="language-plaintext highlighter-rouge">token</code><td>도커 이미지 레지스트리 사용자의 ID 토큰. 토큰 인증에 필수.</table></div><p>자세한 내용은 <a href="https://docs.spring.io/spring-boot/docs/2.7.12/gradle-plugin/reference/htmlsingle/#build-image.examples.docker">예제</a>를 참조해보자.</p><h2 id="53-image-customizations"> <a href="#53-image-customizations" class="anchor-heading" aria-labelledby="53-image-customizations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.3. Image Customizations</h2><p>플러그인은 빌더를 호출하여 이미지 생성을 조율(orchestrate)한다. 빌더에는 애플리케이션을 검사하여, 생성된 이미지에 영향을 줄 수 있는 여러 빌드팩(Buildpack)이 포함되어 있다. 기본적으로, 플러그인은 빌더 이미지를 선택한다. 생성된 이미지 이름은 프로젝트 프로퍼티에서 유추된다.</p><p>태스크 프로퍼티를 사용하여 빌더가 프로젝트에서 작동하는 방식을 구성할 수 있다. 다음 표에는 사용 가능한 프로퍼티와 기본값이 요약되어 있다:</p><div class="table-wrapper"><table><thead><tr><th>Property<th>Command-line option<th>Description<th>Default value<tbody><tr><td><code class="language-plaintext highlighter-rouge">builder</code><td><code class="language-plaintext highlighter-rouge">--builder</code><td>사용할 빌더 이미지 이름.<td><code class="language-plaintext highlighter-rouge">paketobuildpacks/builder:base</code><tr><td><code class="language-plaintext highlighter-rouge">runImage</code><td><code class="language-plaintext highlighter-rouge">--runImage</code><td>사용할 실행 이미지 이름.<td>빌더 메타데이터에 지정된 실행 이미지 기본값 없음.<tr><td><code class="language-plaintext highlighter-rouge">imageName</code><td><code class="language-plaintext highlighter-rouge">--imageName</code><td>생성된 <a href="https://docs.spring.io/spring-boot/docs/2.7.12/api/org/springframework/boot/buildpack/platform/docker/type/ImageReference.html#of-java.lang.String-">이미지 이름</a>.<td><code class="language-plaintext highlighter-rouge">docker.io/library/${project.name}:${project.version}</code><tr><td><code class="language-plaintext highlighter-rouge">pullPolicy</code><td><code class="language-plaintext highlighter-rouge">--pullPolicy</code><td>빌더를 끌어오고 레지스트리에서 이미지를 실행할 시기를 결정하는 데 사용되는 <a href="https://docs.spring.io/spring-boot/docs/2.7.12/api/org/springframework/boot/buildpack/platform/build/PullPolicy.html">정책</a>이다. 허용값은 <code class="language-plaintext highlighter-rouge">ALWAYS</code>, <code class="language-plaintext highlighter-rouge">NEVER</code>, <code class="language-plaintext highlighter-rouge">IF_NOT_PRESENT</code> 이다.<td><code class="language-plaintext highlighter-rouge">ALWAYS</code><tr><td><code class="language-plaintext highlighter-rouge">environment</code><td> <td>빌더에 전달해야 하는 환경 변수이다.<td> <tr><td><code class="language-plaintext highlighter-rouge">buildpacks</code><td> <td>빌더가 이미지를 빌드할 때 사용해야 하는 빌드팩이다. 빌더에 포함된 기본 빌드팩을 재정의(overriding)하여 지정된 빌드팩만 사용된다. 빌드팩 레퍼런스는 다음 형식 중 하나여야 한다.: <br /><br />• 빌더의 빌드팩 - <code class="language-plaintext highlighter-rouge">[urn:cnb:builder:]&lt;buildpackID&gt;[@&lt;version&gt;]</code><br /><br />• 파일 시스템의 디렉터리에 있는 빌드팩 - <code class="language-plaintext highlighter-rouge">[file://]&lt;path&gt;</code><br /><br />• 파일 시스템의 gzip으로 압축된 tar(.tgz) 파일의 빌드팩 - <code class="language-plaintext highlighter-rouge">[file://]&lt;path&gt;/&lt;file name&gt;</code><br /><br />• OCI 이미지의 빌드팩 - <code class="language-plaintext highlighter-rouge">[docker://]&lt;host&gt;/&lt;repo&gt;[:&lt;tag&gt;][@&lt;digest&gt;]</code><td>기본값 없음, 빌더가 빌더에 포함된 빌드팩을 사용해야 함을 나타낸다.<tr><td><code class="language-plaintext highlighter-rouge">bindings</code><td> <td>이미지 빌드할 때 빌더 컨테이너에 마운트해야 하는 <a href="https://docs.docker.com/storage/bind-mounts/">볼륨 바인드 마운트</a>. 바인딩은 빌더 컨테이너를 생성할 때 구문 분석 및 검증되지 않은 상태로 도커에 전달된다. 바인딩은 다음 형식 중 하나여야 한다:<br /><br />•<code class="language-plaintext highlighter-rouge">&lt;host source path&gt;:&lt;container destination path&gt;[:&lt;options&gt;]</code><br /><br />•<code class="language-plaintext highlighter-rouge">&lt;host volume name&gt;:&lt;container destination path&gt;[:&lt;options&gt;]</code><br /><br /><code class="language-plaintext highlighter-rouge">&lt;options&gt;에는 다음과 같은 내용이 포함될 수 있다.:</code><br /><br />• 컨테이너에서 볼륨을 읽기-전용으로 마운트하기 위해 <code class="language-plaintext highlighter-rouge">ro</code> 옵션을 사용한다.<br /><br />• 컨테이너에서 볼륨을 읽기 및 쓰기가 가능하도록 마운트하기 위해 <code class="language-plaintext highlighter-rouge">rw</code> 옵션을 사용한다.<br /><br />• 옵션 이름과 해당 값을 포함하는 키-값 쌍을 지정하기 위해 <code class="language-plaintext highlighter-rouge">volume-opt=key=value</code> 형식을 사용한다.<td> <tr><td><code class="language-plaintext highlighter-rouge">network</code><td><code class="language-plaintext highlighter-rouge">--network</code><td>빌더 컨테이너가 구성될 때 사용할 <a href="https://docs.docker.com/network/#network-drivers">네트워크 드라이버</a>이다. 제공된 값은 빌더 컨테이너를 생성할 때 도커에게 유효성을 검증받지 않고 전달된다.<td> <tr><td><code class="language-plaintext highlighter-rouge">cleanCache</code><td><code class="language-plaintext highlighter-rouge">--cleanCache</code><td>빌드하기 전에 캐시를 정리할지 여부이다.<td><code class="language-plaintext highlighter-rouge">false</code><tr><td><code class="language-plaintext highlighter-rouge">verboseLogging</code><td> <td>빌더 작업에 대한 자세한 로깅을 활성화한다.<td><code class="language-plaintext highlighter-rouge">false</code><tr><td><code class="language-plaintext highlighter-rouge">publish</code><td><code class="language-plaintext highlighter-rouge">--publishImage</code><td>생성된 이미지를 도커 레지스트리에 게시할지 여부이다.<td><code class="language-plaintext highlighter-rouge">false</code><tr><td><code class="language-plaintext highlighter-rouge">tags</code><td> <td>생성된 이미지에 적용할 하나 이상의 추가 태그 목록입니다. <code class="language-plaintext highlighter-rouge">태그</code> 옵션에 제공하는 값은 [image name]:[tag] or [repository]/[image name]:[tag] 형식의 완전한 이미지 레퍼런스여야 한다.<td> <tr><td><code class="language-plaintext highlighter-rouge">buildCache</code><td> <td>빌드팩에서 생성되고 이미지 빌드 프로세스에서 사용되는 레이어가 포함된 캐시.<td>이미지 이름에서 파생된 이름을 가진, 도커 데몬의 명명된 볼륨이다.<tr><td><code class="language-plaintext highlighter-rouge">launchCache</code><td> <td>빌드팩에서 생성되고 이미지 시작 프로세스에서 사용되는 레이어가 포함된 캐시.<td>이미지 이름에서 파생된 이름을 가진, 도커 데몬의 명명된 볼륨이다.</table></div><blockquote class="important"><p>플러그인은 JavaPlugin의 <code class="language-plaintext highlighter-rouge">targetCompatibility</code> 프로퍼티을 사용하여 프로젝트의 대상 자바 호환성(compatibility)을 감지한다. 기본 Paketo 빌더 및 빌드팩을 사용하는 경우, 플러그인은 동일한 자바 버전을 설치하도록 빌드팩에 지시한다. <a href="https://docs.spring.io/spring-boot/docs/2.7.12/gradle-plugin/reference/htmlsingle/#build-image.examples.builder-configuration">빌더 구성</a> 예제에 표시된 대로 이 동작을 재정의할 수 있다.</p></blockquote><h2 id="54-examples"> <a href="#54-examples" class="anchor-heading" aria-labelledby="54-examples"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.4. Examples</h2><h3 id="541-custom-image-builder-and-run-image"> <a href="#541-custom-image-builder-and-run-image" class="anchor-heading" aria-labelledby="541-custom-image-builder-and-run-image"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.4.1. Custom Image Builder and Run Image</h3><p>이미지를 생성하는 데 사용되는 빌더(builder) 또는 빌드된 이미지를 시작하는 데 사용되는 실행 이미지(run image)를 사용자 지정해야 하는 경우, 다음 예와 같이 작업을 구성한다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootBuildImage") {
    builder = "mine/java-cnb-builder"
    runImage = "mine/java-cnb-run"
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootBuildImage&gt;("bootBuildImage") {
    builder = "mine/java-cnb-builder"
    runImage = "mine/java-cnb-run"
  }
</code></pre></div></div><p>위 구성은 이름이 <code class="language-plaintext highlighter-rouge">mine/java-cnb-builder</code>이고 태그가 <code class="language-plaintext highlighter-rouge">latest</code>인 빌더 이미지와 이름이 <code class="language-plaintext highlighter-rouge">mine/java-cnb-run</code>이고 태그가 <code class="language-plaintext highlighter-rouge">latest</code>인 실행 이미지를 사용한다. 빌더 및 실행 이미지는, 이 예제와 같이 명령줄에서도 지정할 수 있다:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ gradle bootBuildImage --builder=mine/java-cnb-builder --runImage=mine/java-cnb-run
</code></pre></div></div><h3 id="542-builder-configuration"> <a href="#542-builder-configuration" class="anchor-heading" aria-labelledby="542-builder-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.4.2. Builder Configuration</h3><p>만약 빌더가 구성 옵션을 노출시킨다면, <code class="language-plaintext highlighter-rouge">environment</code> 프로퍼티를 사용하여 설정할 수 있다. 다음은 빌드 시 Paketo 자바 빌드팩에서 사용하는 <a href="https://paketo.io/docs/howto/java/">JVM 버전 구성</a> 예시이다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootBuildImage") {
    environment = ["BP_JVM_VERSION" : "8.*"]
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootBuildImage&gt;("bootBuildImage") {
    environment = mapOf("BP_JVM_VERSION" to "8.*")
  }
</code></pre></div></div><p>빌더가 실행되는 도커 데몬과 빌드팩이 아티팩트(artifacts)를 다운로드하는 네트워크 위치 사이에 네트워크 프록시가 있는 경우, 프록시를 사용하도록 빌더를 구성해야 한다. Paketo 빌더를 사용하는 경우 다음 예제와 같이 <code class="language-plaintext highlighter-rouge">HTTPS_PROXY</code> 및/또는 <code class="language-plaintext highlighter-rouge">HTTP_PROXY</code> 환경 변수를 설정하여 이를 수행할 수 있다.</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootBuildImage") {
    environment = [
      "HTTP_PROXY" : "http://proxy.example.com",
      "HTTPS_PROXY": "https://proxy.example.com"
    ] 
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tasks.named&lt;BootBuildImage&gt;("bootBuildImage") {
      environment = mapOf(
        "HTTP_PROXY" to "http://proxy.example.com",
        "HTTPS_PROXY" to "https://proxy.example.com"
      )
}
</code></pre></div></div><h3 id="543-runtime-jvm-configuration"> <a href="#543-runtime-jvm-configuration" class="anchor-heading" aria-labelledby="543-runtime-jvm-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.4.3. Runtime JVM Configuration</h3><p>Paketo 자바 빌드팩은 <code class="language-plaintext highlighter-rouge">JAVA_TOOL_OPTIONS</code> <a href="https://paketo.io/docs/howto/java/">환경 변수를 설정</a>하여 JVM 런타임 환경을 구성한다. 제공된-빌드팩 <code class="language-plaintext highlighter-rouge">JAVA_TOOL_OPTIONS</code> 값을 수정하여 애플리케이션 이미지가 컨테이너에서 실행될 때 JVM 런타임 동작을 사용자 정의할 수 있다. 이미지에 저장되며 모든 배포에 적용해야 하는 환경 변수 수정 사항은 <a href="https://paketo.io/docs/howto/configuration/">Paketo 문서</a>에 설명된 대로 설정할 수 있으며 다음 예제에 표시된다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootBuildImage") {
    environment = [
      "BPE_DELIM_JAVA_TOOL_OPTIONS" : " ",
      "BPE_APPEND_JAVA_TOOL_OPTIONS" : "-XX:+HeapDumpOnOutOfMemoryError"
    ] 
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootBuildImage&gt;("bootBuildImage") {
    environment = mapOf(
      "BPE_DELIM_JAVA_TOOL_OPTIONS" to " ",
      "BPE_APPEND_JAVA_TOOL_OPTIONS" to "-XX:+HeapDumpOnOutOfMemoryError"
    )
  }
</code></pre></div></div></main><hr><footer><p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2017-2020 Patrick Marsceill. Distributed by an <a href="https://github.com/just-the-docs/just-the-docs/tree/main/LICENSE.txt">MIT license.</a> <a href="https://www.netlify.com/">This site is powered by Netlify.</a></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0"> <a href="/tree/main/docs/2.7.12/gradle_plugin/5. packaging_OCI_Images.md" id="edit-this-page"></a></p></div></footer></div></div><div class="search-overlay"></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script>
