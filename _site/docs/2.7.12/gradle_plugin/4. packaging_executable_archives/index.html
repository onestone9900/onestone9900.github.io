<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico" type="image/x-icon"><title>Packaging Executable Archives | 문서 한글화</title><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Packaging Executable Archives" /><meta property="og:locale" content="en_US" /><meta name="description" content="한글 번역" /><meta property="og:description" content="한글 번역" /><link rel="canonical" href="http://0.0.0.0:4000/docs/2.7.12/gradle_plugin/4.%20packaging_executable_archives/" /><meta property="og:url" content="http://0.0.0.0:4000/docs/2.7.12/gradle_plugin/4.%20packaging_executable_archives/" /><meta property="og:site_name" content="문서 한글화" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Packaging Executable Archives" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"한글 번역","headline":"Packaging Executable Archives","url":"http://0.0.0.0:4000/docs/2.7.12/gradle_plugin/4.%20packaging_executable_archives/"}</script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewBox="0 0 16 16"><title>Copy</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"><title>Copied</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg><div class="side-bar"><div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> 문서 한글화 </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">onestone</a><li class="nav-list-item active"><button class="nav-list-expander btn-reset" aria-label="toggle items in 2.7.12 category" aria-pressed="true"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/2.7.12/" class="nav-list-link">2.7.12</a><ul class="nav-list"><li class="nav-list-item "><button class="nav-list-expander btn-reset" aria-label="toggle items in SpringBoot category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/2.7.12/spring_boot/0.%20spring_boot/" class="nav-list-link">SpringBoot</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/2.7.12/spring_boot/1.%20legal/" class="nav-list-link">1. Legal</a><li class="nav-list-item "> <a href="/docs/2.7.12/spring_boot/2.%20getting-help/" class="nav-list-link">2. Getting Help</a></ul><li class="nav-list-item active"><button class="nav-list-expander btn-reset" aria-label="toggle items in GradlePlugin category" aria-pressed="true"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/2.7.12/gradle_plugin/0.%20gradle_plugin/" class="nav-list-link">GradlePlugin</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/2.7.12/gradle_plugin/1.%20introduction/" class="nav-list-link">1. Introduction</a><li class="nav-list-item "> <a href="/docs/2.7.12/gradle_plugin/2.%20getting_started/" class="nav-list-link">2. Getting Started</a><li class="nav-list-item "> <a href="/docs/2.7.12/gradle_plugin/3.%20managing_dependencies/" class="nav-list-link">3. Managing Dependencies</a><li class="nav-list-item active"> <a href="/docs/2.7.12/gradle_plugin/4.%20packaging_executable_archives/" class="nav-list-link active">4. Packaging Executable Archives</a><li class="nav-list-item "> <a href="/docs/2.7.12/gradle_plugin/5.%20packaging_OCI_Images/" class="nav-list-link">5. Packaging OCI Images</a></ul></ul><li class="nav-list-item"><a href="/docs/grossary/" class="nav-list-link">용어사전 및 규칙</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search" role="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search 문서 한글화" aria-label="Search 문서 한글화" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="//github.com/onestone9900" class="site-button" > Onestone on GitHub </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/docs/2.7.12/">2.7.12</a><li class="breadcrumb-nav-list-item"><a href="/docs/2.7.12/gradle_plugin/0.%20gradle_plugin/">GradlePlugin</a><li class="breadcrumb-nav-list-item"><span>4. Packaging Executable Archives</span></ol></nav><div id="main-content" class="main-content"><main><h1 id="chapter-4-packaging-executable-archives"> <a href="#chapter-4-packaging-executable-archives" class="anchor-heading" aria-labelledby="chapter-4-packaging-executable-archives"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Chapter 4. Packaging Executable Archives</h1><p>플러그인은 애플리케이션의 모든 의존성을 포함하고 <code class="language-plaintext highlighter-rouge">java -jar</code>로 실행할 수 있는 실행 가능한 압축파일(jar 파일 및 war 파일)를 생성할 수 있다.</p><h2 id="41-packaging-executable-jars"> <a href="#41-packaging-executable-jars" class="anchor-heading" aria-labelledby="41-packaging-executable-jars"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.1. Packaging Executable Jars</h2><p>실행 가능한 jar는 <code class="language-plaintext highlighter-rouge">bootJar</code> 태스크(Task)를 사용하여 빌드할 수 있다. 태스크는 <code class="language-plaintext highlighter-rouge">java</code> 플러그인이 적용될 때 자동 생성되며 <code class="language-plaintext highlighter-rouge">BootJar</code>의 인스턴스이다. <code class="language-plaintext highlighter-rouge">assemble</code> 태스크는 <code class="language-plaintext highlighter-rouge">bootJar</code> 태스크에 따라 자동 구성되므로 <code class="language-plaintext highlighter-rouge">assemble</code>(또는 <code class="language-plaintext highlighter-rouge">build</code>)을 실행하면 <code class="language-plaintext highlighter-rouge">bootJar</code> 작업도 실행된다.</p><h2 id="42-packaging-executable-wars"> <a href="#42-packaging-executable-wars" class="anchor-heading" aria-labelledby="42-packaging-executable-wars"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.2. Packaging Executable Wars</h2><p>실행 가능한 war는 <code class="language-plaintext highlighter-rouge">bootWar</code> 태스크를 사용하여 구축할 수 있다. 태스크는 <code class="language-plaintext highlighter-rouge">war</code> 플러그인 적용 시 자동으로 생성되며 <code class="language-plaintext highlighter-rouge">BootWar</code>의 인스턴스이다. <code class="language-plaintext highlighter-rouge">assemble</code> 태스크는 <code class="language-plaintext highlighter-rouge">bootWar</code> 태스크에 따라 자동으로 구성되므로 <code class="language-plaintext highlighter-rouge">assemble</code>(또는 <code class="language-plaintext highlighter-rouge">build</code>)을 실행하면 <code class="language-plaintext highlighter-rouge">bootWar</code> 태스크도 실행된다.</p><h3 id="421-packaging-executable-and-deployable-wars"> <a href="#421-packaging-executable-and-deployable-wars" class="anchor-heading" aria-labelledby="421-packaging-executable-and-deployable-wars"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.2.1. Packaging Executable and Deployable Wars</h3><p>war 파일은 <code class="language-plaintext highlighter-rouge">java -jar</code>를 사용하여 실행하고 외부 컨테이너에 배포하도록 패키징할 수 있다. 그렇게 하려면, 내장된 서블릿 컨테이너 의존성을 <code class="language-plaintext highlighter-rouge">providedRuntime</code> 구성에 추가해야 한다. 예를 들어:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  dependencies {
    implementation('org.springframework.boot:spring-boot-starter-web')
    providedRuntime('org.springframework.boot:spring-boot-starter-tomcat')
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  dependencies {
    implementation("org.springframework.boot:spring-boot-starter-web")
    providedRuntime("org.springframework.boot:spring-boot-starter-tomcat")
}
</code></pre></div></div><p>이렇게 하면 외부 컨테이너의 자체 클래스와 충돌하지 않는 war 파일의 <code class="language-plaintext highlighter-rouge">WEB-INF/lib-provided</code> 디렉터리에 패키징된다.</p><blockquote class="important"><p>그레이들은 <code class="language-plaintext highlighter-rouge">compileOnly</code> 구성보다 <code class="language-plaintext highlighter-rouge">providedRuntime</code>이 선호되며, 무엇보다 <code class="language-plaintext highlighter-rouge">compileOnly</code> 의존성은 테스트 클래스패스에 없기 때문에 모든 웹 기반 통합 테스트가 실패한다.</p></blockquote><h2 id="43-packaging-executable-and-plain-archives"> <a href="#43-packaging-executable-and-plain-archives" class="anchor-heading" aria-labelledby="43-packaging-executable-and-plain-archives"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.3. Packaging Executable and Plain Archives</h2><p>기본적으로, <code class="language-plaintext highlighter-rouge">bootJar</code> 또는 <code class="language-plaintext highlighter-rouge">bootWar</code> 태스크가 구성됐을 때, <code class="language-plaintext highlighter-rouge">jar</code> 또는 <code class="language-plaintext highlighter-rouge">war</code> 태스크는 압축파일 구분자(archive Classifier) 규약으로 <code class="language-plaintext highlighter-rouge">plain</code>이 추가로 구성된다. 이렇게 하면 <code class="language-plaintext highlighter-rouge">bootJar</code>와 <code class="language-plaintext highlighter-rouge">jar</code> 또는 <code class="language-plaintext highlighter-rouge">bootWar</code>와 <code class="language-plaintext highlighter-rouge">war</code>가 서로 다른 출력 위치를 갖게 되어 실행 가능한 압축파일과 일반 압축파일을 동시에 빌드할 수 있다.</p><p>만약 일반 압축파일이 아닌 실행 가능한 압축파일에 구분자를 사용하는 것을 선호하는 경우, <code class="language-plaintext highlighter-rouge">jar</code> 및 <code class="language-plaintext highlighter-rouge">bootJar</code> 태스크에 대해 다음 예제에 표시된 대로 구분자를 구성한다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootJar") {
    archiveClassifier = 'boot'
  }
  tasks.named("jar") {
    archiveClassifier = ''
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootJar&gt;("bootJar") {
    archiveClassifier.set("boot")
  }
  tasks.named&lt;Jar&gt;("jar") {
    archiveClassifier.set("")
  }
</code></pre></div></div><p>또는, 일반 압축파일이 빌드 되지 않게 하려면, <code class="language-plaintext highlighter-rouge">jar</code> 태스크에 대한 다음 예와 같이 해당 태스크를 비활성화해야 한다.</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("jar") {
    enabled = false
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;Jar&gt;("jar") {
    enabled = false
  }
</code></pre></div></div><h2 id="44-configuring-executable-archive-packaging"> <a href="#44-configuring-executable-archive-packaging" class="anchor-heading" aria-labelledby="44-configuring-executable-archive-packaging"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.4. Configuring Executable Archive Packaging</h2><p><code class="language-plaintext highlighter-rouge">BootJar</code> 및 <code class="language-plaintext highlighter-rouge">BootWar</code> 태스크는 각각 그레이들의 <code class="language-plaintext highlighter-rouge">Jar</code> 및 <code class="language-plaintext highlighter-rouge">War</code> 태스크의 하위 클래스이다. 결과적으로, 모든 표준 구성 옵션은 jar 또는 war를 패키징할 때 사용할 수 있고, 실행 가능한 jar 또는 war를 패키징할 때도 사용할 수 있다. 실행 가능한 jar 및 war에 특정한 여러 구성 옵션도 제공된다.</p><h3 id="441-configuring-the-main-class"> <a href="#441-configuring-the-main-class" class="anchor-heading" aria-labelledby="441-configuring-the-main-class"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.4.1. Configuring the Main Class</h3><p>기본적으로, 실행 가능한 압축파일의 메인(main) 클래스는 태스크의 클래스 패스(class path) 내의 디렉토리에서 <code class="language-plaintext highlighter-rouge">public static void main(String[])</code> 메서드가 있는 클래스를 찾아 자동으로 구성된다.</p><p>메인(main) 클래스는 태스크의 <code class="language-plaintext highlighter-rouge">mainClass</code> 프로퍼티를 사용하여 명시적으로 구성할 수도 있다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootJar") {
    mainClass = 'com.example.ExampleApplication'
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootJar&gt;("bootJar") {
    mainClass.set("com.example.ExampleApplication")
  }
</code></pre></div></div><p>또는, 메인(main) 클래스 이름은 스프링 부터 DSL의 <code class="language-plaintext highlighter-rouge">mainClass</code> 프로퍼티를 사용하여 프로젝트 전체에 구성할 수 있다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  springBoot {
    mainClass = 'com.example.ExampleApplication'
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  springBoot {
    mainClass.set("com.example.ExampleApplication")
  }
</code></pre></div></div><p>만약 <a href="https://docs.gradle.org/current/userguide/application_plugin.html"><code class="language-plaintext highlighter-rouge">application</code> 플러그인</a>이 적용된 경우 해당 <code class="language-plaintext highlighter-rouge">mainClass</code> 프로퍼티를 반드시 구성해야 하며 동일한 용도로 사용할 수 있다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  application {
    mainClass = 'com.example.ExampleApplication'
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  application {
    mainClass.set("com.example.ExampleApplication")
  }
</code></pre></div></div><p>마지막으로, 태스크의 매니페스트에서 <code class="language-plaintext highlighter-rouge">Start-Class</code> attribute을 구성할 수 있다.</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootJar") {
    manifest {
      attributes 'Start-Class': 'com.example.ExampleApplication'
    }
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootJar&gt;("bootJar") {
    manifest {
      attributes("Start-Class" to "com.example.ExampleApplication")
    }
  }
</code></pre></div></div><blockquote class="important"><p>만약, 메인 클래스가 코틀린으로 작성된 경우, 생성된 자바 클래스의 이름을 사용해야 한다. 기본적으로, <code class="language-plaintext highlighter-rouge">Kt</code> 접미사가 추가된 코트린 클래스의 이름이다. 예를 들어,<code class="language-plaintext highlighter-rouge">ExampleApplication</code>은 <code class="language-plaintext highlighter-rouge">ExampleApplicationKt</code>가 된다. <code class="language-plaintext highlighter-rouge">@JvmName</code>을 사용하여 다른 이름이 정의된 경우 해당 이름을 사용해야 한다.</p></blockquote><h3 id="442-including-development-only-dependencies"> <a href="#442-including-development-only-dependencies" class="anchor-heading" aria-labelledby="442-including-development-only-dependencies"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.4.2. Including Development-only Dependencies</h3><p>기본적으로 <code class="language-plaintext highlighter-rouge">developmentOnly</code> 구성에 선언된 모든 의존성은 실행 가능한 jar 또는 war에서 제외된다.</p><p>압축파일의 <code class="language-plaintext highlighter-rouge">developmentOnly</code> 구성에 선언된 의존성을 포함하려면, <code class="language-plaintext highlighter-rouge">bootWar</code> 태스크에 대한 다음 예제처럼, 구성을 포함하도록 태스크의 클래스패스를 구성한다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tasks.named("bootWar") {
      classpath configurations.developmentOnly
}
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootWar&gt;("bootWar") {
      classpath(configurations["developmentOnly"])
}
</code></pre></div></div><h3 id="443-configuring-libraries-that-require-unpacking"> <a href="#443-configuring-libraries-that-require-unpacking" class="anchor-heading" aria-labelledby="443-configuring-libraries-that-require-unpacking"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.4.3. Configuring Libraries that Require Unpacking</h3><p>대부분의 라이브러리는 실행 가능한 압축파일에 중첩될 때 직접 사용할 수 있지만, 특정 라이브러리에는 문제가 있을 수 있다. 예를 들어 JRuby에는 <code class="language-plaintext highlighter-rouge">jruby-complete.jar</code>을 항상 파일 시스템에서 직접 사용 가능하다고 가정하는 자체 중첩된 jar 지원이 포함되어 있다.</p><p>문제가 있는 라이브러리를 처리하기 위해, 실행 가능한 압축파일이 실행될 때 특정 중첩된 jar의 압축을 임시 디렉토리에 풀도록 실행 가능한 압축파일을 구성할 수 있다. 라이브러리는 소스 jar 파일의 절대 경로와 일치하는 앤트-스타일(Ant-style)패턴을 사용하여 압축 해제가 필요한 것으로 식별할 수 있다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootJar") {
    requiresUnpack '**/jruby-complete-*.jar'
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootJar&gt;("bootJar") {
    requiresUnpack("**/jruby-complete-*.jar")
  }
</code></pre></div></div><p>더 많은 제어를 위해 클로저(closure)를 사용할 수도 있다. 클로저는 <code class="language-plaintext highlighter-rouge">FileTreeElement</code>로 전달되며 압축 해제가 필요한지 여부를 나타내는 <code class="language-plaintext highlighter-rouge">boolean</code>을 반환해야 한다.</p><h3 id="444-making-an-archive-fully-executable"> <a href="#444-making-an-archive-fully-executable" class="anchor-heading" aria-labelledby="444-making-an-archive-fully-executable"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.4.4. Making an Archive Fully Executable</h3><p>Spring Boot는 완전히 실행 가능한 압축파일을 지원한다. 애플리케이션 실행 방법을 알고 있는 셸 스크립트를 추가하여 압축파일을 실행 가능하게 만든다. 유닉스와 같은 플랫폼에서, 시작 스크립트를 사용하여 압축파일을 다른 실행 파일처럼 직접 실행하거나 서비스로 설치할 수 있다.</p><blockquote class="important"><p>현재 일부 도구는 이 형식을 허용하지 않으므로 항상 이 기술을 사용하지 못할 수도 있다. 예를 들어 <code class="language-plaintext highlighter-rouge">jar -xf</code>는 완전히 실행 가능한 jar 또는 war를 자동으로 추출하지 못할 수 있다. <code class="language-plaintext highlighter-rouge">java -jar</code>로 실행하거나 서블릿 컨테이너(servlet container)에 배포하는 것 보단, 직접 실행하려는 경우 이 옵션을 활성화하는 것이 좋다.</p></blockquote><p>이 기능을 사용하려면, 실행 스크립트 포함을 활성화해야 한다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootJar") {
    launchScript()
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootJar&gt;("bootJar") {
    launchScript()
  }
</code></pre></div></div><p>이렇게 하면 스프링 부트의 기본 실행 스크립트가 압축파일에 추가된다. 기본 시작 스크립트에는 적절한 기본값이 있는 여러 속성이 포함되어 있다.<code class="language-plaintext highlighter-rouge">properties</code> 프로퍼티를 사용하여 값을 사용자 지정할 수 있다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootJar") {
    launchScript {
      properties 'logFilename': 'example-app.log'
    }
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootJar&gt;("bootJar") {
    launchScript {
      properties(mapOf("logFilename" to "example-app.log"))
    }
  }
</code></pre></div></div><p>기본 시작 스크립트가 요구 사항을 충족하지 않는 경우, 스크립트 프로퍼티를 사용하여 사용자 지정 시작 스크립트를 제공할 수 있다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootJar") {
    launchScript {
      script = file('src/custom.script')
    }
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootJar&gt;("bootJar") {
    launchScript {
      script = file("src/custom.script")
    }
  }
</code></pre></div></div><h3 id="445-using-the-propertieslauncher"> <a href="#445-using-the-propertieslauncher" class="anchor-heading" aria-labelledby="445-using-the-propertieslauncher"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.4.5. Using the PropertiesLauncher</h3><p><code class="language-plaintext highlighter-rouge">PropertiesLauncher</code>를 사용하여 실행 가능한 jar 또는 war를 실행하려면, 작업의 매니페스트를 구성하여 <code class="language-plaintext highlighter-rouge">Main-Class</code> 속성을 설정하십시오.</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootWar") {
    manifest {
      attributes 'Main-Class': 'org.springframework.boot.loader.PropertiesLauncher'
    }
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootWar&gt;("bootWar") {
    manifest {
      attributes("Main-Class" to "org.springframework.boot loader.PropertiesLauncher")
    } 
  }
</code></pre></div></div><h3 id="446-packaging-layered-jar-or-war"> <a href="#446-packaging-layered-jar-or-war" class="anchor-heading" aria-labelledby="446-packaging-layered-jar-or-war"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4.4.6. Packaging Layered Jar or War</h3><p>기본적으로, <code class="language-plaintext highlighter-rouge">bootJar</code> 태스크는 <code class="language-plaintext highlighter-rouge">BOOT-INF/classes</code> 및 <code class="language-plaintext highlighter-rouge">BOOT-INF/lib</code> 각각에 애플리케이션 클래스와 의존성을 포함한 압축파일을 빌드한다. 마찬가지로, bootWar는 <code class="language-plaintext highlighter-rouge">WEB-INF/classes</code>에 애플리케이션 클래스를 포함하고 <code class="language-plaintext highlighter-rouge">WEB-INF/lib</code> 및 <code class="language-plaintext highlighter-rouge">WEB-INF/lib-provided</code>에 의존성을 포함하는 압축파일을 빌드한다. jar 콘텐츠에 도커 이미지를 빌드해야 하는 경우, 이러한 디렉토리를 더 분리하여 각 계층에 쓸 수 있도록 하는 것이 유용하다.</p><p>계층화된 jar는 일반 부트 패키지 jar와 동일한 레이아웃을 사용하지만, 각 계층을 설명하는 추가 메타-데이터(meta-data) 파일을 포함한다.</p><p>기본적으로, 다음 계층이 정의된다:</p><p>• 버전에 <code class="language-plaintext highlighter-rouge">SNAPSHOT</code>이 포함되지 않은 비-프로젝트 의존성에 대한 <code class="language-plaintext highlighter-rouge">dependencies</code>.</p><p>• jar 로더 클래스를 위한 <code class="language-plaintext highlighter-rouge">spring-boot-loader</code></p><p>• 버전에 <code class="language-plaintext highlighter-rouge">SNAPSHOT</code>이 포함된 비 프로젝트 의존성에 대한 <code class="language-plaintext highlighter-rouge">snapshot-dependencies</code>.</p><p>• 프로젝트 의존성, 애플리케이션 클래스 및 리소스에 대한 <code class="language-plaintext highlighter-rouge">application</code>.</p><p>계층 순서는 애플리케이션의 일부가 변경될 때 이전 계층이 캐시될 수 있는 가능성을 결정하므로 중요하다. 기본 순서는 <code class="language-plaintext highlighter-rouge">dependencies</code>, <code class="language-plaintext highlighter-rouge">spring-boot-loader</code>, <code class="language-plaintext highlighter-rouge">snapshot-dependencies</code>, <code class="language-plaintext highlighter-rouge">application</code>이다. 변경 가능성이 가장 적은 콘텐츠을 먼저 추가한 다음, 변경 가능성이 높은 계층을 추가해야 한다.</p><p>이 기능을 비활성화하려면, 다음과 같은 방법으로 수행할 수 있다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootJar") {
    layered {
      enabled = false
    }
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootJar&gt;("bootJar") {
    layered {
      isEnabled = false
    }
  }
</code></pre></div></div><p>계층화된 jar 또는 war가 생성되면, <code class="language-plaintext highlighter-rouge">spring-boot-jarmode-layertools</code> jar가 압축파일에 대한 의존성으로 추가된다. 클래스 경로에 있는 이 jar 파일을 사용하면, 부트스트랩(bootstrap) 코드가 애플리케이션과 완전히 다른 것(예를들어, 계층을 추출하는 것)을 실행할 수 있는 특수 모드에서 애플리케이션을 시작할 수 있다. 이 의존성을 제외하려면 다음과 같은 방법으로 수행할 수 있다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootJar") {
    layered {
      includeLayerTools = false
    }
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootJar&gt;("bootJar") {
    layered {
      isIncludeLayerTools = false
    }
  }
</code></pre></div></div><p><b>Custom Layers Configuration</b></p><p>애플리케이션에 따라, 계층 생성 방법을 조정하고 새 계층를 추가할 수 있다.</p><p>jar 또는 war를 계층으로 분리하는 방법과, 해당 계층의 순서를 설명하는 구성을 사용할 수 있다. 다음 예는 위에서 설명한 기본 순서를 명시적으로 정의하는 방법을 보여준다:</p><p><code class="language-plaintext highlighter-rouge">Groovy</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named("bootJar") {
    layered {
      application {
        intoLayer("spring-boot-loader") {
          include "org/springframework/boot/loader/**"
        }
        intoLayer("application")
      }
      dependencies {
        intoLayer("application") {
          includeProjectDependencies()
        }
        intoLayer("snapshot-dependencies") {
          include "*:*:*SNAPSHOT"
        }
        intoLayer("dependencies")
      }
      layerOrder = ["dependencies", "spring-boot-loader", "snapshot-dependencies", "application"]
    } 
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Kotlin</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  tasks.named&lt;BootJar&gt;("bootJar") {
    layered {
        application {
          intoLayer("spring-boot-loader") {
            include("org/springframework/boot/loader/**")
          }
          intoLayer("application")
        }
        dependencies {
          intoLayer("application") {
            includeProjectDependencies()
          }
          intoLayer("snapshot-dependencies") {
            include("*:*:*SNAPSHOT")
          }
          intoLayer("dependencies")
        }
        layerOrder = listOf("dependencies", "spring-boot-loader", "snapshot-dependencies", "application")

    } 
  }
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">layered</code> DSL은 세 부분으로 정의된다.</p><p>• <code class="language-plaintext highlighter-rouge">application</code> 클로저(closure)는 애플리케이션 클래스와 리소스가 계층화되는 방식을 정의한다.</p><p>• <code class="language-plaintext highlighter-rouge">dependencies</code> 클로저는 의존성이 계층화되는 방법을 정의한다.</p><p>• <code class="language-plaintext highlighter-rouge">layerOrder</code> 메서드는 계층이 작성되어야 하는 순서를 정의한다.</p><p>중첩된 <code class="language-plaintext highlighter-rouge">intoLayer</code> 클로저는 <code class="language-plaintext highlighter-rouge">application</code> 및 <code class="language-plaintext highlighter-rouge">dependencies</code> 섹션 내에서 계층에 대한 콘텐츠를 요청하는 데 사용된다. 이러한 클로저는 정의된 것처럼 위아래 순서대로 수행된다. 이전 <code class="language-plaintext highlighter-rouge">intoLayer</code> 클로저에 의해 소유권이 선점되지 않은 모든 콘텐츠는 후속 콘텐츠에서 사용할 수 있다. 또한 프로젝트 의존성을 포함하거나 제외하는 데 사용할 수 있는 <code class="language-plaintext highlighter-rouge">ncludeProjectDependencies()</code> 및 <code class="language-plaintext highlighter-rouge">excludeProjectDependencies()</code> 메서드를 제공한다.</p><p><code class="language-plaintext highlighter-rouge">intoLayer</code> 클로저는 중첩된 <code class="language-plaintext highlighter-rouge">include</code> 및 <code class="language-plaintext highlighter-rouge">exclude</code> 호출하여 콘텐츠를 선점한다. <code class="language-plaintext highlighter-rouge">application</code> 클로저는 include/exclude 파라미터에 앤트-스타일(Ant-style) 경로 일치를 사용한다. <code class="language-plaintext highlighter-rouge">dependencies</code> 섹션은 <code class="language-plaintext highlighter-rouge">group:artifact[:version]</code> 패턴을 사용한다.</p><p><code class="language-plaintext highlighter-rouge">include</code> 호출이 수행되지 않으면, 모든 콘텐츠(이전 클로저에서 소유권을 선점하지 않은 콘텐츠)가 고려된다.</p><p><code class="language-plaintext highlighter-rouge">exclude</code> 호출이 수행되지 않으면, 제외가 적용되지 않는다.</p><p>위의 예에서 <code class="language-plaintext highlighter-rouge">dependencies</code> 클로저를 보면, 첫 번째 <code class="language-plaintext highlighter-rouge">intoLayer</code>가 <code class="language-plaintext highlighter-rouge">application</code> 계층에 대한 모든 프로젝트 의존성을 요구한다는 것을 알 수 있다. 다음 <code class="language-plaintext highlighter-rouge">intoLayer</code>는 <code class="language-plaintext highlighter-rouge">snapshot-dependencies</code> 계층에 대한 모든 SNAPSHOT 의존성을 요구한다. 세 번째이자 마지막 <code class="language-plaintext highlighter-rouge">intoLayer</code>는 <code class="language-plaintext highlighter-rouge">dependencies</code> 계층에 대해 남아 있는 모든 항목(이 경우 프로젝트 의존성 또는 SNAPSHOT이 아닌 모든 의존성)을 요구한다.</p><p><code class="language-plaintext highlighter-rouge">application</code> 클로저에도 비슷한 규칙이 있다. <code class="language-plaintext highlighter-rouge">spring-boot-loader</code> 계층에 대한 <code class="language-plaintext highlighter-rouge">org/springframework/boot/loader/**</code> 콘텐츠를 처음 선점하는 것이다. 그런 다음 <code class="language-plaintext highlighter-rouge">application</code> 계층에 대한 나머지 클래스 및 리소스를 요청한다.</p><blockquote class="important"><p><code class="language-plaintext highlighter-rouge">intoLayer</code> 클로저가 추가되는 순서는 종종 계층이 작성되는 순서와 다르다. 이러한 이유로 <code class="language-plaintext highlighter-rouge">layerOrder</code> 메소드는 항상 호출되어야 하며 <code class="language-plaintext highlighter-rouge">intoLayer</code> 호출이 참조하는 모든 계층을 커버해야 한다.</p></blockquote></main><hr><footer><p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2017-2020 Patrick Marsceill. Distributed by an <a href="https://github.com/just-the-docs/just-the-docs/tree/main/LICENSE.txt">MIT license.</a> <a href="https://www.netlify.com/">This site is powered by Netlify.</a></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0"> <a href="/tree/main/docs/2.7.12/gradle_plugin/4. packaging_executable_archives.md" id="edit-this-page"></a></p></div></footer></div></div><div class="search-overlay"></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script>
